# DockUp Demo Script for VHS
# Usage: vhs scripts/demo.tape

Output demo.gif
Set FontSize 14
Set Width 1200
Set Height 700
Set Theme "Catppuccin Mocha"
Set TypingSpeed 50ms

# Title Screen - echo a title
Type "echo  "ðŸš€ DockUp - Zero-Bloat PaaS Deme""
Enter
Sleep 2s
Type " clear"
Enter
Sleep 0.5s

# Step 1: Global Install
Type "curl -fsSL https://raw.githubusercontent.com/Moe1211/dockup/main/install-global.sh | bash"
Enter
Sleep 0.5s
Type " ðŸš€ Installing DockUp..."
Type " ðŸ“¦ Downloading DockUp..."
Type " ðŸ“¥ Installing to /Users/n1nja/.local/bin..."
Type " ðŸ“¥ Installing main.go to /Users/n1nja/.local/share/dockup..."
Type " âœ… DockUp installed successfully!"
Type " You can now use "
Type " dockup"
Type " from anywhere:"
Type " dockup user@vps-ip deploy"
Type " dockup user@vps-ip setup"
Type " dockup user@vps-ip init"
Type " dockup"
Type " command is availabl"
Enter
Sleep 2s
Type " dockup version"
Enter
Sleep 0.5s
Type " DockUp v1.0.10"
Enter
Sleep 1s
Type " clear"
Enter
Sleep 0.5s

# Step 2: VPS Setup
Type "dockup user@vps-ip setup"
Enter
Sleep 0.5s
Type " DockUp v1.0.10"
Type " ðŸ”¨ Building Agent for Linux..."
Type " ðŸš€ Uploading Agent and Installer to user@vps-ip..."
Type " âš™ï¸  Running Remote Installer..."
Type " >> Installing Dependencies..."
Type " >> Setting up Directories..."
Type " >> Installing Agent..."
Type " >> Configuring Systemd..."
Type " >> GitHub App configuration required"
Type "    Run "
Type " dockup user@vps-ip configure-github-app"
Type "  to set up GitHub App credentials"
Type " âœ… VPS Setup Complete!"
Type " ðŸ“‹ Important Next Steps:"
Type " 1. Configure GitHub App credentials:"
Type " Run: dockup user@vps-ip configure-github-app   See GITHUB_APP_SETUP.md for detailed instructions"
Type " 2. Make sure your VPS firewall allows port 8080:   The agent listens on port 8080 for webhooks"
Type " 3. Run "
Type " deploy"
Type "  command from your project directory:   cd /path/to/your-project   dockup user@vps-ip deploy'"
Enter
Sleep 3s
Type "clear"
Enter
Sleep 0.5s

# Step 3: Navigate to project and deploy
Type "cd my-project"
Enter
Sleep 0.5s
Type "dockup user@vps-ip deploy"
Enter
Sleep 0.5s
Type " DockUp v1.0.10"
Type " ðŸš€ Deploying "
Type " my-project"
Type "  to user@vps-ip..."
Type " ðŸ“‹ Step 1: Checking DockUp installation..."
Type "    âœ“ DockUp is installed"
Type " ðŸ“‹ Step 2: Checking repository registration..."
Type "    Repository not registered. Registering..."
Type "    >> Cloning repository..."
Type "    >> Using GitHub App token for cloning...Cloning into "
Type " /opt/dockup/apps/my-project"
Type " ..."
Type "    >> Registering app in DockUp..."
Type "    >> Restarting DockUp agent..."
Type "    âœ“ Repository registered"
Type " ðŸ“‹ Step 3: Building and deploying..."
Type "    Triggering deployment..."
Type "    âœ“ Deployment triggered successfully"
Type " âœ… Deployment in progress!"
Type " ðŸ’¡ Monitor deployment logs:"
Type "   ssh user@vps-ip "
Type " journalctl -u dockup -f"
Type "
Type " ðŸ“‹ Step 4: Setting up GitHub webhook..."
Type "    âœ“ Webhook created via GitHub App (ID: 582253515)"
Type " ðŸŽ‰ Deploy complete! Future pushes to main will auto-deploy."
Enter
Sleep 3s
Type "clear"
Enter
Sleep 0.5s

# Step 4: List registered apps
Type "dockup user@vps-ip list"
Enter
Sleep 0.5s
Type " DockUp v1.0.10"
Type " ðŸ“‹ Registered Apps on user@vps-ip"
Type " Found 1 registered app(s):"
Type " ðŸ“¦ my-project"
Type "    Path:        /opt/dockup/apps/my-project"
Type "    Branch:      main"
Type "    Compose File: docker-compose.yml"
Type "    Status:      Directory exists"
Type "    Containers:  2 running'"
Enter
Sleep 2s
Type " clear"
Enter
Sleep 0.5s

# Step 5: Disconnect
Type "dockup user@vps-ip disconnect"
Enter
Sleep 0.5s
Type " DockUp v1.0.10"
Type " ðŸ”Œ Disconnecting "
Type " my-project"
Type "  from DockUp on user@vps-ip..."
Type " ðŸ“‹ Step 2: Removing from DockUp registry..."
Type "    >> Reloading DockUp agent..."
Type "    âœ“ Removed from registry"
Type " âœ… Disconnected "
Type " my-project"
Type "  from DockUp"
Type " â„¹ï¸  App directory and containers are still running"
Type "    Use "
Type " dockup user@vps-ip remove"
Type "  to completely delete the app"
Enter
Sleep 2s
Type " clear"
Enter
Sleep 0.5s

# Step 6: Remove
Type "dockup user@vps-ip remove"
Enter
Sleep 0.5s
Type " DockUp v1.0.10"
Type " ðŸ—‘ï¸  Removing "
Type " my-project"
Type "  from DockUp on user@vps-ip..."
Type " âš ï¸  This will:"
Type "   - Stop and remove all containers"
Type "   - Remove from DockUp registry"
Type "   - Delete app directory: /opt/dockup/apps/my-project"
Type "   - Remove GitHub webhook"
Type " Are you sure? (yes/no): "
Enter
Sleep 0.5s
Type " yes"
Enter
Sleep 0.5s
Type " ðŸ“‹ Step 1: Stopping containers..."
Type "    >> No docker-compose.yml found, skipping container removal"
Type " ðŸ“‹ Step 2: Removing GitHub webhook..."
Type "    âœ“ Webhook removed from GitHub"
Type " ðŸ“‹ Step 3: Removing from DockUp registry..."
Type "    >> Reloading DockUp agent..."
Type "    âœ“ Removed from registry"
Type " ðŸ“‹ Step 4: Deleting app directory..."
Type "    >> App directory deleted"
Type "    âœ“ Directory removed"
Type " âœ… Completely removed my-project from DockUp"
Enter
Sleep 2s
Type " clear"
Enter
Sleep 0.5s

# Final message
Type " âœ… Demo Complete!"
Enter
Sleep 1s
